{
    "meta": {
        "schema_version": "1.1.0",
        "awf_version": "3.3.0",
        "updated_at": "2026-01-24T23:38:00+07:00"
    },
    "project": {
        "name": "Chrome Profile Manager",
        "type": "desktop-app",
        "status": "active-development",
        "description": "Tauri + Angular desktop app to manage multiple Chrome profiles"
    },
    "tech_stack": {
        "frontend": {
            "framework": "Angular 20",
            "ui_library": "PrimeNG",
            "styling": "Tailwind CSS + tailwindcss-primeui",
            "state": "Angular Signals"
        },
        "backend": {
            "runtime": "Tauri 2.x (Rust)",
            "plugins": [
                "tauri-plugin-fs",
                "tauri-plugin-shell",
                "tauri-plugin-dialog",
                "tauri-plugin-os",
                "tauri-plugin-log"
            ]
        },
        "database": {
            "type": "file-based",
            "format": "JSON metadata per profile (.profile-meta.json)"
        }
    },
    "architecture": {
        "profile_storage": {
            "managed_profiles_path": {
                "macOS": "~/Library/Application Support/ChromeProfileManager/Profiles",
                "windows": "%APPDATA%/ChromeProfileManager/Profiles",
                "linux": "~/.config/ChromeProfileManager/Profiles"
            },
            "native_chrome_path": {
                "macOS": "~/Library/Application Support/Google/Chrome",
                "windows": "%LOCALAPPDATA%/Google/Chrome/User Data",
                "linux": "~/.config/google-chrome"
            }
        },
        "profile_detection": {
            "native_profile": "Parent folder has 'Local State' file",
            "managed_profile": "No 'Local State' in parent",
            "valid_profile_check": "Has 'Preferences' file OR named 'Default'/'Profile X'"
        },
        "launch_behavior": {
            "native_profile": "--user-data-dir=<parent> --profile-directory=<folder_name>",
            "managed_profile": "--user-data-dir=<profile_path>"
        }
    },
    "key_files": {
        "rust_commands": "src-tauri/src/commands.rs",
        "tauri_config": "src-tauri/src/lib.rs",
        "settings_service": "src/app/core/services/settings.service.ts",
        "profile_service": "src/app/services/profile.service.ts",
        "home_component": "src/app/views/pages/home/home.ts"
    },
    "features": [
        {
            "name": "Profile Management",
            "status": "implemented",
            "includes": [
                "scan",
                "create",
                "delete",
                "rename",
                "duplicate"
            ]
        },
        {
            "name": "Multi-Browser Support",
            "status": "implemented",
            "browsers": [
                "Chrome",
                "Brave",
                "Edge",
                "Arc"
            ]
        },
        {
            "name": "Profile Metadata",
            "status": "implemented",
            "includes": [
                "emoji",
                "notes",
                "group",
                "tags",
                "launchUrl",
                "isPinned"
            ]
        },
        {
            "name": "Settings Page",
            "status": "partial",
            "includes": [
                "Appearance (themes, colors)",
                "Browser Paths"
            ]
        },
        {
            "name": "Smart Profile Detection",
            "status": "implemented",
            "description": "Auto-detect native vs managed profiles for correct launch"
        }
    ],
    "knowledge_items": {
        "patterns": [
            {
                "name": "Tauri 2.x Environment Detection",
                "code": "window.__TAURI_INTERNALS__ !== undefined",
                "note": "Tauri 1.x uses window.__TAURI__, Tauri 2.x uses window.__TAURI_INTERNALS__"
            },
            {
                "name": "Chrome Profile Directory Structure",
                "note": "User Data Dir contains 'Local State' + profile folders (Default, Profile 1, etc.)"
            }
        ],
        "gotchas": [
            {
                "issue": "Using --user-data-dir with profile subfolder creates NEW profile",
                "solution": "Use --user-data-dir=<parent> --profile-directory=<folder> for native profiles"
            },
            {
                "issue": "tauri-plugin-os not working",
                "solution": "Must add to Cargo.toml, register in lib.rs, AND add 'os:default' to capabilities"
            }
        ],
        "conventions": [
            "All page components MUST have host: { class: 'flex-1 flex flex-col min-h-0 overflow-hidden' }",
            "Use async/await + firstValueFrom for user actions",
            "Commit after every significant change with semantic format"
        ]
    }
}