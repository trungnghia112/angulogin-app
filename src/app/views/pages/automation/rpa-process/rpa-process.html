<!-- Header -->
<div id="rpa-process-header"
    class="flex items-center justify-between px-6 h-[var(--spacing-header)] shrink-0 border-b border-surface-100 dark:border-surface-800 bg-surface-0 dark:bg-surface-900">
    <div class="flex items-center gap-4">
        <h1 class="text-xl font-bold text-color m-0">Process</h1>
        <p-iconField iconPosition="left">
            <p-inputIcon class="pi pi-search" />
            <input id="rpa-process-search" type="text" pInputText placeholder="Search processes..."
                [value]="searchQuery()" (input)="onSearch($event)" class="w-56" />
        </p-iconField>
    </div>
    <div class="flex items-center gap-2">
        <p-button id="rpa-process-import" label="Import" icon="pi pi-upload" severity="secondary" size="small" />
        <p-button id="rpa-process-export" label="Export" icon="pi pi-download" severity="secondary" size="small" />
    </div>
</div>

<!-- Content -->
<div id="rpa-process-content" class="flex-1 overflow-auto bg-surface-50 dark:bg-surface-950">
    @if (savedEntries().length === 0) {
    <div class="flex flex-col items-center justify-center h-64 text-muted-color">
        <i class="pi pi-box text-4xl mb-4"></i>
        <p class="text-lg font-medium">No saved processes</p>
        <p class="text-sm">Go to Marketplace and save templates to see them here</p>
    </div>
    } @else {
    <table class="w-full">
        <thead>
            <tr class="border-b border-surface-100 dark:border-surface-800 bg-surface-0 dark:bg-surface-900">
                <th class="text-left text-xs font-semibold text-muted-color uppercase tracking-wide px-6 py-3">Name</th>
                <th class="text-left text-xs font-semibold text-muted-color uppercase tracking-wide px-4 py-3">Platform
                </th>
                <th class="text-left text-xs font-semibold text-muted-color uppercase tracking-wide px-4 py-3">Author
                </th>
                <th class="text-left text-xs font-semibold text-muted-color uppercase tracking-wide px-4 py-3">Version
                </th>
                <th class="text-left text-xs font-semibold text-muted-color uppercase tracking-wide px-4 py-3">Updated
                </th>
                <th class="text-right text-xs font-semibold text-muted-color uppercase tracking-wide px-6 py-3">Actions
                </th>
            </tr>
        </thead>
        <tbody>
            @for (entry of savedEntries(); track entry.id; let i = $index) {
            <tr [id]="'rpa-process-row-' + i"
                class="border-b border-surface-50 dark:border-surface-800 hover:bg-surface-100/50 dark:hover:bg-surface-800/50 transition-colors">
                <td class="px-6 py-3">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg flex items-center justify-center shrink-0"
                            [style.background-color]="getPlatformColor(entry.platform) + '18'">
                            <i [class]="'pi ' + entry.platformIcon + ' text-sm'"
                                [style.color]="getPlatformColor(entry.platform)"></i>
                        </div>
                        <span class="text-sm font-medium text-color">{{ entry.title }}</span>
                    </div>
                </td>
                <td class="px-4 py-3">
                    <span class="text-xs font-medium px-2 py-0.5 rounded-full"
                        [style.background-color]="getPlatformColor(entry.platform) + '18'"
                        [style.color]="getPlatformColor(entry.platform)">
                        {{ entry.platform }}
                    </span>
                </td>
                <td class="px-4 py-3">
                    <span class="text-sm text-muted-color">{{ entry.author }}</span>
                </td>
                <td class="px-4 py-3">
                    <span class="text-xs text-muted-color bg-surface-100 dark:bg-surface-800 rounded px-2 py-0.5">
                        v{{ entry.version }}
                    </span>
                </td>
                <td class="px-4 py-3">
                    <span class="text-sm text-muted-color">{{ entry.updatedAt | date:'MMM d' }}</span>
                </td>
                <td class="px-6 py-3 text-right">
                    <div class="flex items-center justify-end gap-1">
                        <p-button icon="pi pi-play" [rounded]="true" [text]="true" severity="success" size="small"
                            pTooltip="Run" tooltipPosition="top" (click)="runProcess(entry)" />
                        <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger" size="small"
                            pTooltip="Remove" tooltipPosition="top" (click)="removeProcess(entry)" />
                    </div>
                </td>
            </tr>
            }
        </tbody>
    </table>
    }
</div>