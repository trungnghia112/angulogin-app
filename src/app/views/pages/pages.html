<div class="flex h-screen bg-bg overflow-hidden">
    <!-- Main Navigation (Icon Rail) -->
    <app-main-nav />

    <!-- Sub Sidebar (Conditional) -->
    @if (hasSidebar()) {
    <div class="transition-all duration-300 ease-in-out">
        @switch (sidebarType()) {
        @case ('folders') {
        <app-sidebar [folders]="folders()" [selectedFolderId]="selectedFolderId()"
            (folderSelected)="onFolderSelected($event)" (addFolderClicked)="onAddFolder()"
            (settingsClicked)="onSettings()" (folderSettingsClicked)="onFolderSettings()" />
        }
        @case ('extensions') {
        <!-- Extensions sidebar placeholder -->
        <aside class="flex flex-col h-screen w-60 bg-sidebar border-r border-border">
            <div class="px-4 py-4 border-b border-border">
                <span class="text-base font-semibold text-zinc-50">Extensions</span>
            </div>
            <div class="flex-1 flex items-center justify-center text-zinc-500 text-sm">
                Coming soon...
            </div>
        </aside>
        }
        }
    </div>
    }

    <!-- Main Content -->
    <main class="flex-1 flex flex-col overflow-hidden">
        <router-outlet />
    </main>
</div>